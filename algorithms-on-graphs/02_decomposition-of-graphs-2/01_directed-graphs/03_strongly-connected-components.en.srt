1
00:00:01,190 --> 00:00:04,410
Hello everybody, welcome back
to our graph algorithms course.

2
00:00:04,410 --> 00:00:08,990
Today we're going to be talking about
notions of connectivity in directed graphs

3
00:00:08,990 --> 00:00:11,640
which it turns out will be a little
bit more complicated than those in

4
00:00:11,640 --> 00:00:13,320
the undirected case.

5
00:00:13,320 --> 00:00:16,270
And we'll talk about various
notions then get to this idea

6
00:00:16,270 --> 00:00:17,659
of a strongly connected component.

7
00:00:19,230 --> 00:00:23,250
So in undirected graphs,
connectivity is a pretty simple notion.

8
00:00:23,250 --> 00:00:26,140
We have these connected components where

9
00:00:26,140 --> 00:00:29,640
any two things in the same component
you can get from one to the other.

10
00:00:29,640 --> 00:00:31,450
And if you've got two
different components,

11
00:00:31,450 --> 00:00:33,110
they've got no edges between them.

12
00:00:33,110 --> 00:00:34,020
Nothing connects at all.

13
00:00:35,170 --> 00:00:37,619
In directed graphs the story
is a bit more complicated.

14
00:00:38,670 --> 00:00:41,406
So let's consider
the following example graph.

15
00:00:41,406 --> 00:00:45,808
Now in one sense this graph is connected,
you can't separate it out into two islands

16
00:00:45,808 --> 00:00:48,600
such that you can't reach
one island from the other.

17
00:00:50,610 --> 00:00:53,280
On the other hand if you want to look at
which vertices can be reached from which

18
00:00:53,280 --> 00:00:55,350
others, the story is
a bit more complicated.

19
00:00:56,650 --> 00:01:01,920
From vertex D it turns out you can
reach every other vertex in this graph.

20
00:01:01,920 --> 00:01:03,870
However, D is a source for attacks.

21
00:01:03,870 --> 00:01:04,560
Once you leave D,

22
00:01:04,560 --> 00:01:08,040
there's no way to get back to it,
there are just no edges that come into it.

23
00:01:09,770 --> 00:01:15,000
Now A just sort of, sorry,
A F is sort of the opposite here.

24
00:01:15,000 --> 00:01:19,470
From every vertex in the graph you can
reach F, but once again, once you do,

25
00:01:19,470 --> 00:01:21,380
you can't get back.

26
00:01:21,380 --> 00:01:24,059
Then again, G and A, neither of them
can be reached from each other.

27
00:01:24,059 --> 00:01:28,300
H and I, you can get between them but
once you leave, again, you can't get back.

28
00:01:28,300 --> 00:01:30,970
It's sort of a lot more complicated if

29
00:01:30,970 --> 00:01:33,480
we want to figure out which things
are reachable from which others.

30
00:01:35,480 --> 00:01:39,110
Now, there are actually a bunch of
possible notions of connectivity that show

31
00:01:39,110 --> 00:01:40,460
up in directed graphs.

32
00:01:41,970 --> 00:01:46,290
The first one is sort of that these two
points can't be separated from each other,

33
00:01:46,290 --> 00:01:49,010
that you can't put them on
two different islands where

34
00:01:49,010 --> 00:01:51,259
nothing in one island connects
to anything in the other.

35
00:01:52,270 --> 00:01:55,510
And this sort of says that it means you
can get from one vertex to the other,

36
00:01:55,510 --> 00:01:57,600
following edges in any all direction.

37
00:01:58,690 --> 00:02:01,940
And I mean, okay, this says you
can't put them on different islands,

38
00:02:01,940 --> 00:02:05,760
but it doesn't say you can reach
either from the other one without

39
00:02:05,760 --> 00:02:09,010
breaking traffic laws by following
one-way streets in the wrong direction.

40
00:02:10,370 --> 00:02:13,680
So, a second notion is that maybe
we want one of the vertices

41
00:02:13,680 --> 00:02:18,450
to be reachable from the other using the
actual edges and their intended direction.

42
00:02:18,450 --> 00:02:20,860
And this is a more practical notion.

43
00:02:20,860 --> 00:02:25,160
However, it has its weird irregularities
that makes it hard to deal with.

44
00:02:25,160 --> 00:02:29,000
So, third notion that's maybe a little
bit stronger is that you should have two

45
00:02:29,000 --> 00:02:33,220
vertices, v and w,
where not only can you reach w from v,

46
00:02:33,220 --> 00:02:35,960
but you can also go back and
reach v from w.

47
00:02:37,260 --> 00:02:40,260
And this third notion turns
out to be pretty nice.

48
00:02:40,260 --> 00:02:43,050
So when we say that two vertices v and

49
00:02:43,050 --> 00:02:45,840
w in a directed graph are connected,
we mean this.

50
00:02:45,840 --> 00:02:50,857
We mean that you can reach v from w,
and also can reach w from v.

51
00:02:50,857 --> 00:02:55,394
But the theorem now is that using this
notion we actually recover much of

52
00:02:55,394 --> 00:02:58,870
the power that we had
in the undirected case.

53
00:02:58,870 --> 00:03:04,040
A directed graph can always be partitioned
into strongly connected components

54
00:03:04,040 --> 00:03:09,160
where two vertices are in the same
strongly connected component, if and

55
00:03:09,160 --> 00:03:11,120
only if they are connected to each other.

56
00:03:12,470 --> 00:03:17,375
So, for example, the graph that we looked
at has five strongly connected components.

57
00:03:17,375 --> 00:03:19,010
After you can get it all
around around there,

58
00:03:19,010 --> 00:03:21,960
but there's no way to get
from it to anything else.

59
00:03:21,960 --> 00:03:27,460
H and I you can get from one to the other
but not necessarily to other things.

60
00:03:27,460 --> 00:03:32,070
A, B, C and E from any of those four
vertices you can reach any other one, but

61
00:03:32,070 --> 00:03:33,960
once you leave again you can't get back.

62
00:03:35,090 --> 00:03:38,802
D and G are each their own components and
that's it.

63
00:03:38,802 --> 00:03:43,120
Within each of these components you can
get from everywhere to anywhere else.

64
00:03:43,120 --> 00:03:45,460
But again once you leave it,
you can't come back.

65
00:03:47,400 --> 00:03:51,232
So to make sure we are on the same page,
we have the following graph.

66
00:03:51,232 --> 00:03:54,459
What is the strongly connect
component of A in this graph?

67
00:03:56,290 --> 00:03:59,070
Well, it turns out to
be the following set.

68
00:03:59,070 --> 00:04:02,190
A, B, E, F, G, and
H are in this component.

69
00:04:02,190 --> 00:04:03,530
The other ones aren't.

70
00:04:03,530 --> 00:04:04,700
And to see this,

71
00:04:04,700 --> 00:04:07,830
we can see that sort of you can
actually get around any of these six.

72
00:04:07,830 --> 00:04:11,240
A goes to E goes to H goes
to F goes to B goes back.

73
00:04:11,240 --> 00:04:14,380
B goes to G goes to H
goes to F goes back to B.

74
00:04:14,380 --> 00:04:17,460
Sort of you can use these to navigate
around, everywhere you like.

75
00:04:17,460 --> 00:04:21,320
But from D you can't get to
D from this other component.

76
00:04:21,320 --> 00:04:24,370
And C and I, once you get there you can't
get back to the other vertices here.

77
00:04:27,930 --> 00:04:31,370
So the result is that you
have a directed graph.

78
00:04:31,370 --> 00:04:35,340
It can always be partitioned into
strongly connected components.

79
00:04:35,340 --> 00:04:38,170
Such that two vertices are connected if
and only if they're in the same component.

80
00:04:39,290 --> 00:04:41,940
And the proof of this is
very similar to the proof of

81
00:04:41,940 --> 00:04:44,940
the sort of similar thing
in the undirected case.

82
00:04:44,940 --> 00:04:48,560
Again, we need to show that
connectivity in the strong sense is

83
00:04:48,560 --> 00:04:50,232
an equivalence relation.

84
00:04:50,232 --> 00:04:54,950
That if u is connected to v, and v is
connected to w, then u is connected to w.

85
00:04:56,320 --> 00:04:59,920
But while if these connections happen,
there's a path from u to v, and

86
00:04:59,920 --> 00:05:01,940
a path from v to w.

87
00:05:01,940 --> 00:05:04,680
And so pushing them together,
there's a path from u to w.

88
00:05:06,020 --> 00:05:08,330
Similarly, there's a path
from w back to u, and

89
00:05:08,330 --> 00:05:12,930
from v back to, sorry,
w back to v and v back to u.

90
00:05:12,930 --> 00:05:17,070
And composing them again gives
you a path from w back to u.

91
00:05:17,070 --> 00:05:18,130
And so that completes our proof.

92
00:05:20,010 --> 00:05:22,682
Now there's something more to say though.

93
00:05:22,682 --> 00:05:25,708
Once we've split our graph
into connected components,

94
00:05:25,708 --> 00:05:29,250
they still have edges connecting
these components to each other.

95
00:05:30,620 --> 00:05:34,360
So one useful thing to do is to
draw what's known as the metagraph,

96
00:05:34,360 --> 00:05:39,190
which sort of tells us how these connected
components connect to each other.

97
00:05:39,190 --> 00:05:43,954
So this metagraph has vertices that
correspond to the connected components of

98
00:05:43,954 --> 00:05:45,260
the original graph.

99
00:05:45,260 --> 00:05:49,467
And you have an edge between the two of
them if there's an edge in that direction

100
00:05:49,467 --> 00:05:51,077
connecting those vertices.

101
00:05:51,077 --> 00:05:54,799
So D connects to A, so there's an edge
between D and the component of A.

102
00:05:54,799 --> 00:05:57,418
It also connects to G, A, B, C or

103
00:05:57,418 --> 00:06:01,727
E, those guys have edges
leading to H including F and so

104
00:06:01,727 --> 00:06:06,960
they have edges into those components and
so on and so forth.

105
00:06:06,960 --> 00:06:07,940
And this is our metagraph.

106
00:06:09,260 --> 00:06:12,610
Now one thing to note about this metagraph
is if you stare for a little while,

107
00:06:12,610 --> 00:06:17,490
you can actually see that it's a deck and
this is in fact no coincidence.

108
00:06:17,490 --> 00:06:23,200
It turns out that the metagraph
of any graph G is always a DAG.

109
00:06:23,200 --> 00:06:27,030
Now the proof of this is not so
hard, suppose that it's not.

110
00:06:27,030 --> 00:06:28,590
What that means is that there's a cycle.

111
00:06:29,630 --> 00:06:32,340
And what happens if you have
a cycle is that every node

112
00:06:32,340 --> 00:06:34,780
in the cycle can be reached
in every other node

113
00:06:34,780 --> 00:06:37,980
because you just travel along
the cycle until you get there.

114
00:06:39,230 --> 00:06:41,690
Now, this would be true if
they were individual vertices,

115
00:06:41,690 --> 00:06:46,070
but it's also true if you have a cycle
between strongly connected components.

116
00:06:46,070 --> 00:06:49,880
Because you just, since everything in one
component connects to everything else,

117
00:06:49,880 --> 00:06:53,150
you can just get to the guy
leading to the next component, and

118
00:06:53,150 --> 00:06:55,180
then to the vertex leading
to the next component,

119
00:06:55,180 --> 00:06:57,780
and this sort of follows all
the way around the cycle.

120
00:06:57,780 --> 00:07:00,680
And so everything in all of those
components are all connected

121
00:07:00,680 --> 00:07:01,860
to each other.

122
00:07:01,860 --> 00:07:04,094
But since everything is connected,

123
00:07:04,094 --> 00:07:07,776
they should all be the same
strongly connected components.

124
00:07:07,776 --> 00:07:11,278
However the single vertices of
the metagraph are strongly connected

125
00:07:11,278 --> 00:07:15,380
components, so you can't have two vertices
that are connected to each other and

126
00:07:15,380 --> 00:07:17,030
that gives us a contradiction.

127
00:07:19,340 --> 00:07:20,960
Okay, so in summary,

128
00:07:20,960 --> 00:07:24,570
we can always partition our vertices
into strongly connected components.

129
00:07:25,630 --> 00:07:29,680
We have a metagraph, describes how
these strongly connected components

130
00:07:29,680 --> 00:07:33,010
connect to each other, and
this metagraph is always a DAG.

131
00:07:34,360 --> 00:07:36,360
So, this is what we have.

132
00:07:36,360 --> 00:07:37,390
Next time what we're going

133
00:07:37,390 --> 00:07:39,860
to do is we're going to actually talk
about how to compute these things.

134
00:07:39,860 --> 00:07:42,670
How do we compute the strongly
connected components of the graph,

135
00:07:42,670 --> 00:07:44,260
how do we find the metagraph?

136
00:07:44,260 --> 00:07:47,080
So, come back for the next lecture and
we'll talk about that.