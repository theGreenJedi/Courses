1
00:00:00,170 --> 00:00:04,380
Hi, in the previous lesson you learned
to find shortest paths in the graph

2
00:00:04,380 --> 00:00:06,650
with non-negative edge weight.

3
00:00:06,650 --> 00:00:09,200
In this lesson,
you will learn to find shortest paths

4
00:00:09,200 --> 00:00:12,810
even in the graphs where some of
the edge weights can be negative.

5
00:00:12,810 --> 00:00:16,260
We will explore that using
a problem about currency exchange,

6
00:00:16,260 --> 00:00:19,670
which doesn't seem to have anything
to do with shortest paths.

7
00:00:19,670 --> 00:00:21,660
But we will soon find out it does.

8
00:00:21,660 --> 00:00:26,450
So the problem about
currency exchange is that

9
00:00:26,450 --> 00:00:31,450
you are given some possibilities that
you can convert currency into another.

10
00:00:31,450 --> 00:00:33,930
For example, US dollars to Russian rubles,

11
00:00:33,930 --> 00:00:38,650
or rubles to Euros, or
Euros to Norwegian crowns.

12
00:00:38,650 --> 00:00:43,320
And what you want to do is
take your initial $1,000 and

13
00:00:43,320 --> 00:00:46,310
convert it into Russian rubles.

14
00:00:46,310 --> 00:00:49,720
Potentially doing many
conversions on the way,

15
00:00:49,720 --> 00:00:54,680
such that you get as many Russian
rubles as you can in the end.

16
00:00:54,680 --> 00:00:58,850
So one question is what is the maximum
amount of rubles you can get?

17
00:00:58,850 --> 00:01:02,910
And another question is actually
can you get as many as you want?

18
00:01:02,910 --> 00:01:04,890
And the same question about US dollars.

19
00:01:04,890 --> 00:01:07,820
Can you get as many US
dollars as you want?

20
00:01:07,820 --> 00:01:10,755
It may seem that if you can get
as many rubles as you want,

21
00:01:10,755 --> 00:01:13,890
then you will also be able to
get as many dollars as you want.

22
00:01:13,890 --> 00:01:16,980
But that's not always the case,
it depends on your restrictions.

23
00:01:16,980 --> 00:01:22,370
For example, if you lived in the USSR,
you might be able to get some rubles for

24
00:01:22,370 --> 00:01:26,710
dollars you got from your
foreign country trip.

25
00:01:26,710 --> 00:01:32,160
But it's very unlikely you could
buy some dollars inside USSR.

26
00:01:32,160 --> 00:01:37,575
So in this problem we assume that
you have some restrictions on which

27
00:01:37,575 --> 00:01:42,600
directions you can convert currencies and
what are the rates.

28
00:01:42,600 --> 00:01:49,460
So this is an illustration from Wikipedia
article called Triangular Arbitrage

29
00:01:49,460 --> 00:01:55,180
which illustrates the fact that sometimes
it is possible to make three trades and

30
00:01:55,180 --> 00:02:00,535
exchange first dollars to Euros,
then Euros to Great Britain pounds.

31
00:02:00,535 --> 00:02:04,485
And then pounds to US dollars, so
that you generate some profit.

32
00:02:04,485 --> 00:02:06,869
In this case, given $5 million,

33
00:02:06,869 --> 00:02:11,893
you generate a profit of 25,000,
just by doing those three trades.

34
00:02:11,893 --> 00:02:17,620
These triangular arbitrages
exist very rarely and

35
00:02:17,620 --> 00:02:20,040
only due to some market inefficiencies.

36
00:02:20,040 --> 00:02:23,100
But in theory, this is possible.

37
00:02:23,100 --> 00:02:26,870
And this example has some
numbers on the edges.

38
00:02:26,870 --> 00:02:33,990
For example, the rate of conversion
from dollars to Euros is 0.81.

39
00:02:33,990 --> 00:02:39,590
And you get 1.19 Euros per British pound.

40
00:02:39,590 --> 00:02:44,710
And you get 1.46 dollars
per British pound.

41
00:02:44,710 --> 00:02:50,125
So given these conversion rates and
of course those should also count for

42
00:02:50,125 --> 00:02:55,480
commissions and any other money
that you actually don't get.

43
00:02:55,480 --> 00:03:01,005
So given those numbers, you determine
exactly how many dollars will you get from

44
00:03:01,005 --> 00:03:07,060
5 million initial if you do all
the trades shown on the picture.

45
00:03:07,060 --> 00:03:10,362
So we will be discussing this problem,

46
00:03:10,362 --> 00:03:15,965
how much you can get of each currency and
if it's actually possible

47
00:03:15,965 --> 00:03:21,387
to get more of the currency you
had initially doing some trades.

48
00:03:21,387 --> 00:03:24,750
So how does this conversion work?

49
00:03:24,750 --> 00:03:29,740
If we have some path, if we convert first
from dollars to Euros then Euros to

50
00:03:29,740 --> 00:03:34,460
pounds then some other conversions,
then we come to Norwegian crowns and

51
00:03:34,460 --> 00:03:36,990
then we finally convert them to rubles.

52
00:03:36,990 --> 00:03:40,890
Then how many rubles do
we get per 1 US dollar?

53
00:03:40,890 --> 00:03:46,765
Well, it is determined by the product of
the conversion rates written on the edges.

54
00:03:46,765 --> 00:03:51,629
So for example, if for $1,
we get 0.88 Euros and for

55
00:03:51,629 --> 00:03:55,897
1 Euro we get 0.84 pounds,
and so one, and for

56
00:03:55,897 --> 00:04:00,050
1 Norwegian crowns we get 8.08 rubles.

57
00:04:00,050 --> 00:04:05,790
Then for 1 US dollar we will get the
product of all those numbers in rubles.

58
00:04:05,790 --> 00:04:10,740
That's how conversion rates work,
if you account, again, for

59
00:04:10,740 --> 00:04:15,410
commissions and
other payments in each trade

60
00:04:15,410 --> 00:04:20,050
inside this number,
which right on the edge.

61
00:04:21,260 --> 00:04:26,400
So what are the possibilities for
exchanges?

62
00:04:26,400 --> 00:04:29,380
It may look that there is only one way.

63
00:04:29,380 --> 00:04:33,180
You can just convert from
dollars to rubles, or

64
00:04:33,180 --> 00:04:36,420
maybe use some intermediate currency.

65
00:04:36,420 --> 00:04:39,510
But actually, there is an infinite
number of possibilities.

66
00:04:39,510 --> 00:04:43,410
For example, in this particular case,
you could exchange dollars to Euros,

67
00:04:43,410 --> 00:04:48,090
Euros to pounds, pounds to dollars,
and go through this cycle for

68
00:04:48,090 --> 00:04:51,700
as many times as you want,
then convert to rubles.

69
00:04:51,700 --> 00:04:54,690
Or convert to Euros and then to rubles.

70
00:04:54,690 --> 00:04:57,770
So there are many, many possibilities, and

71
00:04:57,770 --> 00:05:03,070
the result of each such
path through the graph

72
00:05:03,070 --> 00:05:08,740
is the product of the numbers
written on the edges of this graph.

73
00:05:08,740 --> 00:05:12,350
So the problem formulated
in mathematical terms,

74
00:05:12,350 --> 00:05:16,860
is that if you're given a currency
exchange graph with weighted directed

75
00:05:16,860 --> 00:05:21,200
edges denoted by ei,
between some pairs of currencies.

76
00:05:21,200 --> 00:05:23,880
Maybe you can convert some
pairs of currencies but

77
00:05:23,880 --> 00:05:26,080
you are not able to convert some others.

78
00:05:26,080 --> 00:05:30,280
And this graph doesn't have to
be symmetrical or undirected.

79
00:05:30,280 --> 00:05:34,770
So it is possible that you can convert
dollars to rubles but not vice versa.

80
00:05:34,770 --> 00:05:40,530
And each edge has a conversion
rate corresponding to this pair

81
00:05:40,530 --> 00:05:45,430
of currencies and it written as
a weight of this edge r with index ei.

82
00:05:46,490 --> 00:05:49,880
And what you want to do
is maximize the product

83
00:05:49,880 --> 00:05:55,250
of the weight of the edges
over all positive paths.

84
00:05:55,250 --> 00:05:59,920
And a potentially infinite number of
paths, from the node corresponding to

85
00:05:59,920 --> 00:06:03,840
US dollars to the node corresponding
Russian rubles in this graph.

86
00:06:05,430 --> 00:06:09,510
Okay, and we could substitute these
two currencies by any other pair,

87
00:06:09,510 --> 00:06:10,741
it doesn't matter.